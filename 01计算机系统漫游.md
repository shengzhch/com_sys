# 计算机系统漫游

## 1.1 信息就是位加上下文 
## 1.2 程序被其他程序翻译成不同的格式

* gcc 
---
流程: hello.c --> hello.i --> hello.s --> hello.o --> hello

---
## 1.3 了解编译系统如何工作大有益处

## 1.4 处理器读并解释存在内存中的指令 

-- 硬件层次 --
* 总线
* IO设备
* 主存
* 处理器 cpu
* 等等

## 1.5 高速缓存直观重要

* cpu和内存之间的差异，局部性原理，cache中存放大概率被访问的数据。

## 1.6 存储设备的层级结构

|- L0  寄存器

|- L1  高速缓存 sram

|- L2  高速缓存 sram

|- L3  高速缓存 sram

|- L4  主存 dram

|- L5  磁盘

。。。

##  1.7 操作系统管理软件

---

《------应用程序-------》

《------操作系统-------》

《--处理器-内存-IO设备--》

--- 

os 通过几个基本的抽象概念实现一下两个基本功能 进程，虚拟内存 文件

* 防止硬件失控被应用程序滥用
* 提供机制操作硬件

文件是I/O设备的抽象，虚拟内存是主存和磁盘I/O设备的抽象表示，进程是对处理器，主存和I/O设备的抽象表示。

#### 进程
让应用程序认为自己独占操作系统，实际上操作系统运行多个进程，在不同的进程之间切换运行指令。
任何时刻，单处理器只能执行一个程序的代码。
所以os要保持跟踪程序运行所需的状态信息，即为上下文。上下文包括很多信息，例如pc，寄存器文件的值以及主存的内容等。
进程转移就会进行上下文切换。同时执行系统调用也会进行上下文的切换。

##### 线程
共享进程的代码和全局数据。

#### 虚拟内存
每个进程看到的内存都是一致的，称为虚拟地址空间。 上边是高地址，底下是低地址

```
高
^  内核虚拟内存 用户代码不可见内存
|  
|  用户栈
|
|  共享库的内存映射区域 printf 函数
|
|  运行时堆 malloc创建
|
|  读写数据         ---
|                     | -  从程序文件中加载到内存中    
|  只读的代码和数据  ---
|
低
```

#### 文件 
文件就是字节序列。每个I/O设备，包括磁盘，键盘显示器设置网络都可以看成文件，系统中所有的输入输入都是通过使用unix I/O的系统函数调用来实现。

## 1.8 系统之间网络通信

主存 --》 网卡 --》 网络传输  --》 网卡 -- 主存

## 1.9 主要主题 
 * Amdahl 定律。对系统中的某个部分加速时，对整个系统的影响取决于该部分的重要程度以及加速程度。

 * 并发和并行
 
 |- 并发 通用的概念，指一个同时具有多个活动的雄

 |- 并行 指用并发实现一个系统运行的更快

 * 多核 每个cpu核都有自己独立的L1和L2缓存

 * https://www.zhihu.com/question/47989803

 * 单指令 多数据并行 SIMD

 * 指令集架构表示处理器的抽象。进程即可抽象为虚拟内存加指令集架构

 * 同时进程+操作系统抽象为虚拟机



















